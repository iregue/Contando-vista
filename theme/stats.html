<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="shortcut icon" href="assets/img/favorites-star-icon.png">

    <title>Counting Stars</title>

    <!-- Bootstrap core CSS -->
    <link href="assets/css/bootstrap.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="assets/css/style.css" rel="stylesheet">
    <link href="assets/css/font-awesome.min.css" rel="stylesheet">


    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
    <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
    <script src="assets/js/validator/validator.js"></script>

    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <!-- Pluging para cookies-->
    <script src="assets/js/jquery.cookie.js"></script>
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/1.0.10/cookieconsent.min.js"></script>
    <!-- End Cookie Consent plugin -->


</head>
<body>

    <!-- Fixed navbar -->
    <div class="navbar navbar-default navbar-fixed-top" role="navigation">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="index.html">Contando estrellas</a>
            </div>
            <div class="navbar-collapse collapse navbar-right">
                <ul class="nav navbar-nav">
                    <li><a href="index.html">Inicio</a></li>
                    <li><a href="registro.html">Registro</a></li>
                    <li class="active"><a href="stats.html">Analizar</a></li>
                    <li><a href="about.html">Acerca de</a></li>
                    <li><a href="settings.html">Ajustes</a></li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Últimos eventos <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            <li><a href="perseidas16.html">Perseidas 2016</a></li>
                            <li><a href="#">Perseidas 2015</a></li>
                        </ul>
                    </li>
                </ul>
            </div><!--/.nav-collapse -->
        </div>
    </div>
<!--===================================FORMULARIO=====================================-->

        <div class="container mtb">
            <div class="row col-md-6 col-md-offset-3">
                <h2>Busqueda de bólidos</h2><br>
                <h4>Filtra los resultados que desea consultar en función de un lugar y/o una fecha</h4><br>
            </div>
            <form>
                <div class="form-group col-md-6 col-md-offset-3">
                    <label>Latitud</label>
                    <input type="text" name="latitude" id="latitude" class="form-control" placeholder="">
                </div>
                <div class="form-group col-md-6 col-md-offset-3">
                    <label>Longitud</label>
                    <input type="text" name="longitude" id="longitude" class="form-control" placeholder="">
                </div>
                <div class="form-group col-md-6 col-md-offset-3">
                    <label>Distancia máxima a [Latitud,Longitud] en Km</label>
                    <input type="text" name="distance" id="distance" class="form-control" pattern="^[\d.]+$" placeholder="" >
                </div>
                <div class="form-group col-md-6 col-md-offset-3">
                    <label>Fecha de inicio</label>
                    <input type="text" class="form-control" name="start_date" id="start_date" placeholder="">
                </div>
                <div class="form-group col-md-6 col-md-offset-3">
                    <label>Fecha final</label>
                    <input type="text" class="form-control" name="end_date" id="end_date" placeholder="">
                </div>
                <div class="row col-md-6 col-md-offset-3">
                    <button type="submit" onclick="getData()" class="btn btn-danger btn-lg">Enviar</button>
                </div>
            </form>
            <br>
            <div class="row col-md-6 col-md-offset-3">
                <h4>Observaciones por países</h4><br>
            </div>
           <div class="row col-md-12" id="regions_div"></div>
        </div>

    <!-- *****************************************************************************************************************
    FOOTER
    ***************************************************************************************************************** -->
    <div id="footerwrap">
        <div class="container">
            <div class="row">
                <div class="col-lg-4">
                    <h4>Acerca de</h4>
                    <div class="hline-w"></div>
                    <p>Esta aplicación ha sido creada para dar soporte a eventos astronómicos con la que se pueda llevar un seguimiento de los bólidos avistados. <br><a href="about.html">Más información</a></p>
                </div>
                <div class="col-lg-4">
                    <h4>Desarrollador</h4>
                    <div class="hline-w"></div>
                    <p>Ignacio Regueiro Tuñon alumno de la Escuela Técnica Superior de Ingenieros Informáticos de la Universidad Politécnica de Madrid ha realizado esta aplicación como trabajo de fin de grado.
                        <br><a href="https://twitter.com/IgnaRegue"><i class="fa fa-twitter"></i></a>
                    </p>
                </div>
                <div class="col-lg-4">
                    <h4>Donde estamos</h4>
                    <div class="hline-w"></div>
                    <p>
                        C/ Campus de Montegancedo, s/n<br/>
                        Facultad de Informática-Universidad Politécnica de Madrid<br/>
                        28660-Madrid<br/>
                    </p>
                </div>

            </div><! --/row -->
        </div><! --/container -->
    </div><! --/footerwrap -->

    <!-- Bootstrap core JavaScript
       ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="assets/js/bootstrap.min.js"></script>
    <script src="assets/js/retina-1.1.0.js"></script>
    <script src="assets/js/jquery.hoverdir.js"></script>
    <script src="assets/js/jquery.hoverex.min.js"></script>
    <script src="assets/js/jquery.prettyPhoto.js"></script>
    <script src="assets/js/jquery.isotope.min.js"></script>
    <script src="assets/js/custom.js"></script>
    <script src="assets/js/jquery.cookie.js"></script>

    <script>
        google.charts.load('upcoming', {'packages':['geochart']});
        google.charts.setOnLoadCallback(drawRegionsMap);


        function drawRegionsMap() {

            var data = google.visualization.arrayToDataTable([
                ['Country', 'Popularity'],
                ['Germany', 200],
                ['United States', 300],
                ['Brazil', 400],
                ['Canada', 500],
                ['France', 600],
                ['RU', 700],
                ['Spain',600],
                    ['Philippines',600],
                    ['Anguilla',600],
                    ['Burkina Faso',600]
            ]);

            var options = {};

            var chart = new google.visualization.GeoChart(document.getElementById('regions_div'));

            chart.draw(data, options);
        }
    if(screen.width < 426){
        $("#regions_div").css("width","310px");
        $("#regions_div").css("height","310px");
        //    style="width: 310px; height: 310px;

    }
    if(screen.width > 425 && screen.width <1024){
        $("#regions_div").css("width","510px");
        $("#regions_div").css("height","410px");
        //$("#regions_div").css("padding","100px 0 0");
        //    style="width: 310px; height: 310px;

    }

    window.cookieconsent_options = {"message":"This website uses cookies to ensure you get the best experience on our website","dismiss":"Got it!","learnMore":"More info","link":null,"theme":"dark-bottom"};

    </script>
<script>
    var n_Spain = 0;
    var n_Afghanistan = 0;
    var n_Albania = 0;
    var n_Algeria = 0;
    var n_American_Samoa = 0;
    var n_Andorra = 0;
    var n_Angola = 0;
    var n_Anguilla = 0;
    var n_Antigua_and_Barbuda = 0;
    var n_Argentina = 0;
    var n_Armenia = 0;
    var n_Australia = 0;
    var n_Austria = 0;
    var n_Azerbaijan = 0;
    var n_Bahamas = 0;
    var n_Bahrain = 0;
    var n_Bangladesh = 0;
    var n_Barbados = 0;
    var n_Belarus = 0;
    var n_Belgium = 0;
    var n_Belize = 0;
    var n_Benin = 0;
    var n_Bermuda = 0;
    var n_Bhutan = 0;
    var n_Bolivia = 0;
    var n_Bosnia_and_Herzegovina = 0;
    var n_Botswana = 0;
    var n_Brazil = 0;
    var n_Brunei = 0;
    var n_Bulgaria = 0;
    var n_Burkina_Faso = 0;
    var n_Burundi = 0;
    var n_Cambodia = 0;
    var n_Cameroon = 0;

    function getData() {
        var _latitude= $('#latitude').val();
        var _longitude= $('#longitude').val();
        var _distance= $('#distance').val();
        var _start_date= $('#start_date').val();
        var _end_date= $('#end_date').val();

        $.cookie('latitude2', _latitude);
        $.cookie('longitude2', _longitude);
        $.cookie('distance2', _distance);
        $.cookie('startdate2', _start_date);
        $.cookie('enddate2', _end_date);

        alert("start");
        //alert("http://localhost/api/observations?lat="+ _latitude + "&lon=" + _longitude + "&distance=" + _distance + "&startdate=" + _start_date + "&enddate=" + _end_date);

        $.get("http://localhost/api/observations?lat="+ _latitude + "&lon=" + _longitude + "&distance=" + _distance + "&startdate=" + _start_date + "&enddate=" + _end_date, function( data ) {
            //var a = data.docs[0].date;
            //var b = data.docs[1].date;
            alert("get init");
            var total = data.total;
            var limit = data.limit;
            //alert("prueba");
            alert(total);
            var pages= Math.floor(total/limit);//Division entera
            alert("paginas: "+ pages);
            var resto = total % limit;
            alert("nº elementos: "+resto);
            if(pages == 0)
            {
                var cont=0;
                while(cont<resto)
                {
                    var temp_country = data.docs[cont].country;
                    switch (temp_country)
                    {
                        case 'Spain':
                            n_Spain= n_Spain + 1;
                            break;
                        case 'Afghanistan':
                            n_Afghanistan = n_Afghanistan + 1;
                            break;
                        case 'Albania':
                            n_Albania = n_Albania + 1;
                            break;
                        case 'Algeria':
                            n_Algeria = n_Algeria + 1;
                            break;
                        case 'American Samoa':
                            n_American_Samoa = n_American_Samoa + 1;
                            break;
                        case 'Andorra':
                            n_Andorra = n_Andorra + 1;
                            break;
                        case 'Angola':
                            n_Angola = n_Angola + 1;
                            break;
                        case 'Anguilla':
                            n_Anguilla = n_Anguilla + 1;
                            break;
                        case 'Antigua and Barbuda':
                            n_Antigua_and_Barbuda = n_Antigua_and_Barbuda + 1;
                            break;
                        case 'Argentina':
                            n_Argentina = n_Argentina + 1;
                            break;
                        case 'Armenia':
                            n_Armenia = n_Armenia + 1;
                            break;
                        case 'Australia':
                            n_Australia = n_Australia + 1;
                            break;
                        case 'Austria':
                            n_Austria = n_Austria + 1;
                            break;
                        case 'Azerbaijan':
                            n_Azerbaijan = n_Azerbaijan + 1;
                            break;
                        case 'Bahamas':
                            n_Bahamas = n_Bahamas + 1;
                            break;
                        case 'Bahrain':
                            n_Bahrain = n_Bahrain + 1;
                            break;
                        case 'Bangladesh':
                            n_Bangladesh = n_Bangladesh + 1;
                            break;
                        case 'Barbados':
                            n_Barbados = n_Barbados + 1;
                            break;
                        case 'Belarus':
                            n_Belarus = n_Belarus + 1;
                            break;
                        case 'Belgium':
                            n_Belgium = n_Belgium + 1;
                            break;
                        case 'Belize':
                            n_Belize = n_Belize + 1;
                            break;
                        case 'Benin':
                            n_Benin = n_Benin + 1;
                            break;
                        case 'Bermuda':
                            n_Bermuda = n_Bermuda + 1;
                            break;
                        case 'Bhutan':
                            n_Bhutan = n_Bhutan + 1;
                            break;
                        case 'Bolivia':
                            n_Bolivia = n_Bolivia + 1;
                            break;
                        case 'Bosnia and Herzegovina':
                            n_Bosnia_and_Herzegovina = n_Bosnia_and_Herzegovina + 1;
                            break;
                        case 'Botswana':
                            n_Botswana = n_Botswana + 1;
                            break;
                        case 'Brazil':
                            n_Brazil = n_Brazil + 1;
                            break;
                        case 'Brunei':
                            n_Brunei = n_Brunei + 1;
                            break;
                        case 'Bulgaria':
                            n_Bulgaria = n_Bulgaria + 1;
                            break;
                        case 'Burkina Faso':
                            n_Burkina_Faso = n_Burkina_Faso + 1;
                            break;
                        case 'Burundi':
                            n_Burundi = n_Burundi + 1;
                            break;
                        case 'Cambodia':
                            n_Cambodia = n_Cambodia + 1;
                            break;
                        case 'Cameroon':
                            n_Cameroon = n_Cameroon + 1;
                            break;

                            /*
                                <option value="Canada">Canada</option>
                                <option value="Cape Verde">Cape Verde</option>
                        <option value="Cayman Islands">Cayman Islands</option>
                        <option value="Central African Republic">Central African Republic</option>
                        <option value="Chad">Chad</option>
                                <option value="Channel Islands">Channel Islands</option>
                        <option value="Chile">Chile</option>
                                <option value="China">China</option>
                                <option value="Christmas Island">Christmas Island</option>
                        <option value="Cocos Island">Cocos Island</option>
                        <option value="Colombia">Colombia</option>
                                <option value="Comoros">Comoros</option>
                                <option value="Congo">Congo</option>
                                <option value="Cook Islands">Cook Islands</option>
                        <option value="Costa Rica">Costa Rica</option>
                        <option value="Cote DIvoire">Cote D'Ivoire</option>
                        <option value="Croatia">Croatia</option>
                                <option value="Cuba">Cuba</option>
                                <option value="Curaco">Curacao</option>
                                <option value="Cyprus">Cyprus</option>
                                <option value="Czech Republic">Czech Republic</option>
                        <option value="Denmark">Denmark</option>
                                <option value="Djibouti">Djibouti</option>
                                <option value="Dominica">Dominica</option>
                                <option value="Dominican Republic">Dominican Republic</option>
                        <option value="East Timor">East Timor</option>
                        <option value="Ecuador">Ecuador</option>
                                <option value="Egypt">Egypt</option>
                                <option value="El Salvador">El Salvador</option>
                        <option value="Equatorial Guinea">Equatorial Guinea</option>
                        <option value="Eritrea">Eritrea</option>
                                <option value="Estonia">Estonia</option>
                                <option value="Ethiopia">Ethiopia</option>
                                <option value="Falkland Islands">Falkland Islands</option>
                        <option value="Faroe Islands">Faroe Islands</option>
                        <option value="Fiji">Fiji</option>
                                <option value="Finland">Finland</option>
                                <option value="France">France</option>
                                <option value="French Guiana">French Guiana</option>
                        <option value="French Polynesia">French Polynesia</option>
                        <option value="French Southern Ter">French Southern Ter</option>
                        <option value="Gabon">Gabon</option>
                                <option value="Gambia">Gambia</option>
                                <option value="Georgia">Georgia</option>
                                <option value="Germany">Germany</option>
                                <option value="Ghana">Ghana</option>
                                <option value="Gibraltar">Gibraltar</option>
                                <option value="Great Britain">Great Britain</option>
                        <option value="Greece">Greece</option>
                                <option value="Greenland">Greenland</option>
                                <option value="Grenada">Grenada</option>
                                <option value="Guadeloupe">Guadeloupe</option>
                                <option value="Guam">Guam</option>
                                <option value="Guatemala">Guatemala</option>
                                <option value="Guinea">Guinea</option>
                                <option value="Guyana">Guyana</option>
                                <option value="Haiti">Haiti</option>
                                <option value="Honduras">Honduras</option>
                                <option value="Hungary">Hungary</option>
                                <option value="Iceland">Iceland</option>
                                <option value="India">India</option>
                                <option value="Indonesia">Indonesia</option>
                                <option value="Iran">Iran</option>
                                <option value="Iraq">Iraq</option>
                                <option value="Ireland">Ireland</option>
                                <option value="Isle of Man">Isle of Man</option>
                        <option value="Israel">Israel</option>
                                <option value="Italy">Italy</option>
                                <option value="Jamaica">Jamaica</option>
                                <option value="Japan">Japan</option>
                                <option value="Jordan">Jordan</option>
                                <option value="Kazakhstan">Kazakhstan</option>
                                <option value="Kenya">Kenya</option>
                                <option value="Kiribati">Kiribati</option>
                                <option value="Korea North">Korea North</option>
                        <option value="Korea Sout">Korea South</option>
                        <option value="Kuwait">Kuwait</option>
                                <option value="Kyrgyzstan">Kyrgyzstan</option>
                                <option value="Laos">Laos</option>
                                <option value="Latvia">Latvia</option>
                                <option value="Lebanon">Lebanon</option>
                                <option value="Lesotho">Lesotho</option>
                                <option value="Liberia">Liberia</option>
                                <option value="Libya">Libya</option>
                                <option value="Liechtenstein">Liechtenstein</option>
                                <option value="Lithuania">Lithuania</option>
                                <option value="Luxembourg">Luxembourg</option>
                                <option value="Macedonia">Macedonia</option>
                                <option value="Madagascar">Madagascar</option>
                                <option value="Malaysia">Malaysia</option>
                                <option value="Malawi">Malawi</option>
                                <option value="Maldives">Maldives</option>
                                <option value="Mali">Mali</option>
                                <option value="Malta">Malta</option>
                                <option value="Marshall Islands">Marshall Islands</option>
                        <option value="Martinique">Martinique</option>
                                <option value="Mauritania">Mauritania</option>
                                <option value="Mauritius">Mauritius</option>
                                <option value="Mayotte">Mayotte</option>
                                <option value="Mexico">Mexico</option>
                                <option value="Midway Islands">Midway Islands</option>
                        <option value="Moldova">Moldova</option>
                                <option value="Monaco">Monaco</option>
                                <option value="Mongolia">Mongolia</option>
                                <option value="Montserrat">Montserrat</option>
                                <option value="Morocco">Morocco</option>
                                <option value="Mozambique">Mozambique</option>
                                <option value="Myanmar">Myanmar</option>
                                <option value="Nambia">Nambia</option>
                                <option value="Nauru">Nauru</option>
                                <option value="Nepal">Nepal</option>
                                <option value="Netherland Antilles">Netherland Antilles</option>
                        <option value="Netherlands">Netherlands (Holland, Europe)</option>
                                <option value="Nevis">Nevis</option>
                                <option value="New Caledonia">New Caledonia</option>
                        <option value="New Zealand">New Zealand</option>
                        <option value="Nicaragua">Nicaragua</option>
                                <option value="Niger">Niger</option>
                                <option value="Nigeria">Nigeria</option>
                                <option value="Niue">Niue</option>
                                <option value="Norfolk Island">Norfolk Island</option>
                        <option value="Norway">Norway</option>
                                <option value="Oman">Oman</option>
                                <option value="Pakistan">Pakistan</option>
                                <option value="Palau Island">Palau Island</option>
                        <option value="Palestine">Palestine</option>
                                <option value="Panama">Panama</option>
                                <option value="Papua New Guinea">Papua New Guinea</option>
                        <option value="Paraguay">Paraguay</option>
                                <option value="Peru">Peru</option>
                                <option value="Philippines">Philippines</option>
                                <option value="Pitcairn Island">Pitcairn Island</option>
                        <option value="Poland">Poland</option>
                                <option value="Portugal">Portugal</option>
                                <option value="Puerto Rico">Puerto Rico</option>
                        <option value="Qatar">Qatar</option>
                                <option value="Republic of Montenegro">Republic of Montenegro</option>
                        <option value="Republic of Serbia">Republic of Serbia</option>
                        <option value="Reunion">Reunion</option>
                                <option value="Romania">Romania</option>
                                <option value="Russia">Russia</option>
                                <option value="Rwanda">Rwanda</option>
                                <option value="St Barthelemy">St Barthelemy</option>
                        <option value="St Eustatius">St Eustatius</option>
                        <option value="St Helena">St Helena</option>
                        <option value="St Kitts-Nevis">St Kitts-Nevis</option>
                        <option value="St Lucia">St Lucia</option>
                        <option value="St Maarten">St Maarten</option>
                        <option value="St Pierre &amp; Miquelon">St Pierre &amp; Miquelon</option>
                        <option value="St Vincent &amp; Grenadines">St Vincent &amp; Grenadines</option>
                        <option value="Saipan">Saipan</option>
                                <option value="Samoa">Samoa</option>
                                <option value="Samoa American">Samoa American</option>
                        <option value="San Marino">San Marino</option>
                        <option value="Sao Tome &amp; Principe">Sao Tome &amp; Principe</option>
                        <option value="Saudi Arabia">Saudi Arabia</option>
                        <option value="Senegal">Senegal</option>
                                <option value="Serbia">Serbia</option>
                                <option value="Seychelles">Seychelles</option>
                                <option value="Sierra Leone">Sierra Leone</option>
                        <option value="Singapore">Singapore</option>
                                <option value="Slovakia">Slovakia</option>
                                <option value="Slovenia">Slovenia</option>
                                <option value="Solomon Islands">Solomon Islands</option>
                        <option value="Somalia">Somalia</option>
                                <option value="South Africa">South Africa</option>
                        <option value="Sri Lanka">Sri Lanka</option>
                        <option value="Sudan">Sudan</option>
                                <option value="Suriname">Suriname</option>
                                <option value="Swaziland">Swaziland</option>
                                <option value="Sweden">Sweden</option>
                                <option value="Switzerland">Switzerland</option>
                                <option value="Syria">Syria</option>
                                <option value="Tahiti">Tahiti</option>
                                <option value="Taiwan">Taiwan</option>
                                <option value="Tajikistan">Tajikistan</option>
                                <option value="Tanzania">Tanzania</option>
                                <option value="Thailand">Thailand</option>
                                <option value="Togo">Togo</option>
                                <option value="Tokelau">Tokelau</option>
                                <option value="Tonga">Tonga</option>
                                <option value="Trinidad &amp; Tobago">Trinidad &amp; Tobago</option>
                                <option value="Tunisia">Tunisia</option>
                                <option value="Turkey">Turkey</option>
                                <option value="Turkmenistan">Turkmenistan</option>
                                <option value="Turks &amp; Caicos Is">Turks &amp; Caicos Is</option>
                        <option value="Tuvalu">Tuvalu</option>
                                <option value="Uganda">Uganda</option>
                                <option value="Ukraine">Ukraine</option>
                                <option value="United Arab Erimates">United Arab Emirates</option>
                        <option value="United Kingdom">United Kingdom</option>
                        <option value="United States of America">United States of America</option>
                        <option value="Uraguay">Uruguay</option>
                                <option value="Uzbekistan">Uzbekistan</option>
                                <option value="Vanuatu">Vanuatu</option>
                                <option value="Vatican City State">Vatican City State</option>
                        <option value="Venezuela">Venezuela</option>
                                <option value="Vietnam">Vietnam</option>
                                <option value="Virgin Islands (Brit)">Virgin Islands (Brit)</option>
                        <option value="Virgin Islands (USA)">Virgin Islands (USA)</option>
                        <option value="Wake Island">Wake Island</option>
                        <option value="Wallis &amp; Futana Is">Wallis &amp; Futana Is</option>
                        <option value="Yemen">Yemen</option>
                                <option value="Zaire">Zaire</option>
                                <option value="Zambia">Zambia</option>
                                <option value="Zimbabwe">Zimbabwe</option> */
                    }
                }
            }

        });


    }

    $('#latitude').val($.cookie('latitude2'));
    $('#longitude').val($.cookie('longitude2'));
    $('#distance').val($.cookie('distance2'));
    $('#start_date').val($.cookie('startdate2'));
    $('#end_date').val($.cookie('enddate2'));
</script>
</body>
</html>
